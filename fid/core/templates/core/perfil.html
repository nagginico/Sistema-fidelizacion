{% extends "core/base.html" %}
{% load static %}

{% block title %}Mi perfil{% endblock %}

{% block content %}
<div class="perfil-container">
    <header class="header">
        <div class="header-left">
             <div class="menu-icon" onclick="toggleMenu()">☰</div>
            <span>Hola, {{ user.first_name|default:user.username }}</span>
            <img src="{% static 'core/css/img/hand-icon.svg' %}" alt="Saludo" class="icon-hand">
        </div>
      <nav id="dropdownMenu" class="dropdown">
            {% if cliente.es_playero %}
                <a href="{% url 'inicio' %}">Ir a Inicio</a>
                <a href="{% url 'panel_playero' %}">Ir al Panel</a>
                <a href="{% url 'logout' %}">Cerrar sesión</a>   
            {% elif user.is_authenticated %}
                <a href="{% url 'inicio' %}">Ir a Inicio</a>
                <a href="{% url 'logout' %}">Cerrar sesión</a>
            {% else %}
                <a href="{% url 'login' %}">Iniciar sesión</a>
                <a href="{% url 'register' %}">Crear cuenta</a>
            {% endif %}
        </nav>
    </header>

    <div class="perfil">
        <h2>Mi Perfil</h2>
        <form method="POST" action="">
            {% csrf_token %}
            <!--<label for="nombre">Nombre:</label> -->
            <input type="text" placeholder="Nombre" id="nombre" name="nombre" value="{{ user.first_name }}">

            <!--<label for="apellido">Apellido:</label> -->
            <input type="text" placeholder="Apellido" id="apellido" name="apellido" value="{{ user.last_name }}">

            <!-- <label for="telefono">Teléfono:</label> -->
            <input type="text" placeholder="Teléfono" id="telefono" name="telefono" value="{{ cliente.telefono }}">

            <!--<label for="email">Email:</label> -->
            <input type="email" placeholder="Email" id="email" name="email" value="{{ user.email }}">

            <button type="submit" class="btn">Guardar cambios</button>
        </form>
    </div>

    <div class="perfil">
        <h2>Cambiar Contraseña</h2>
        <form method="POST" action="{% url 'cambiar_contrasena' %}">
            {% csrf_token %}
            <!--<label for="old_password">Contraseña actual:</label> -->
            <input type="password" placeholder="Contraseña Actual" name="old_password" required>

            <!--<label for="new_password1">Nueva contraseña:</label> -->
            <input type="password" placeholder="Nueva Contraseña" name="new_password1" required>

            <!--<label for="new_password2">Repetir nueva contraseña:</label> -->
            <input type="password" placeholder="Repetir Nueva Contraseña" name="new_password2" required>

            <button type="submit" class="btn">Actualizar Contraseña</button>
        </form>

        {% if form_cambio_pass.errors %}
        <div class="error-message">
            {{ form_cambio_pass.errors }}
        </div>
        {% endif %}
    </div>

    <!--<hr>
    
        <h3>Resumen</h3>
        <p><strong>Puntos acumulados:</strong> {{ cliente.puntos }}</p>
     <p><strong>Posición actual:</strong> {{ posicion }}</p>
    
    <hr>-->

</div>

<script>
// Menú desplegable
function toggleMenu() {
    document.getElementById('dropdownMenu').classList.toggle('active');
}

</script>
{% endblock %}