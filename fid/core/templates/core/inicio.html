{% extends "core/base.html" %}
{% load static %}

{% block title %}Inicio{% endblock %}

{% block content %}
<h2>Bienvenido al Sistema de Fidelizaci√≥n</h2>

{% if user.is_authenticated and cliente %}
    <p><strong>Hola {{ user.username }}</strong></p>
    <p>Tus puntos actuales: <strong>{{ cliente.puntos }}</strong></p>
    <p><a href="{% url 'perfil' %}">Ver perfil completo</a></p>
{% else %}
    <p>¬øA√∫n no sos parte de nuestro programa?</p>
    <a href="{% url 'login' %}">Iniciar sesi√≥n</a> |
    <a href="{% url 'register' %}">Registrarse</a>
{% endif %}

<hr>

<h3>üèÜ Ranking de los 10 mejores</h3>
<table border="1" cellpadding="6" cellspacing="0">
    <tr>
        <th>Posici√≥n</th>
        <th>Tel√©fono</th>
        <th>Puntos</th>
    </tr>
    {% for c in top_clientes %}
        <tr {% if forloop.first %}style="background-color: #ffd700;"{% endif %}>
            <td>{{ forloop.counter }}</td>
            <td>
                {% if c.telefono|length > 4 %}
                    ****{{ c.telefono|slice:"-4:" }}
                {% else %}
                    {{ c.telefono }}
                {% endif %}
            </td>
            <td>{{ c.puntos }}</td>
        </tr>
    {% empty %}
        <tr><td colspan="3">No hay clientes a√∫n.</td></tr>
    {% endfor %}
</table>
{% endblock %}
